{"remainingRequest":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\src\\util\\markdown\\components\\preview\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\src\\util\\markdown\\components\\preview\\index.vue","mtime":1640167407521},{"path":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638433259471},{"path":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1638433269605},{"path":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638433259471},{"path":"C:\\Users\\猫丞\\Desktop\\9M\\frontendVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1638433267894}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\Users\\\\\\u732B\\u4E1E\\\\Desktop\\\\9M\\\\frontendVue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport marked from \"../../config/marked\";\nexport default {\n  name: 'markdown-preview',\n  props: {\n    initialValue: {\n      // 初始化内容\n      type: String,\n      default: ''\n    },\n    markedOptions: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    theme: {\n      type: String,\n      default: 'light'\n    },\n    copyCode: {\n      // 复制代码\n      type: Boolean,\n      default: true\n    },\n    copyBtnText: {\n      // 复制代码按钮文字\n      type: String,\n      default: '复制代码'\n    }\n  },\n  data: function data() {\n    return {\n      html: '',\n      previewImgModal: false,\n      previewImgSrc: '',\n      previewImgMode: ''\n    };\n  },\n  mounted: function mounted() {\n    this.translateMarkdown();\n  },\n  methods: {\n    translateMarkdown: function translateMarkdown() {\n      var html = marked(this.initialValue, _objectSpread({\n        sanitize: false\n      }, this.markedOptions)).replace(/href=\"/gi, 'target=\"_blank\" href=\"');\n\n      if (this.copyCode) {\n        html = html.replace(/<pre>/g, '<div class=\"code-block\"><span class=\"copy-code\">' + this.copyBtnText + '</span><pre>').replace(/<\\/pre>/g, '</pre></div>');\n      }\n\n      this.html = html;\n      this.addCopyListener();\n      this.addImageClickListener();\n    },\n    addCopyListener: function addCopyListener() {\n      var _this = this;\n\n      // 监听复制操作\n      setTimeout(function () {\n        var btns = document.querySelectorAll('.code-block .copy-code');\n        _this.btns = btns;\n\n        var _loop = function _loop(i, len) {\n          btns[i].onclick = function () {\n            var code = btns[i].parentNode.querySelectorAll('pre')[0].innerText;\n            var aux = document.createElement('input');\n            aux.setAttribute('value', code);\n            document.body.appendChild(aux);\n            aux.select();\n            document.execCommand('copy');\n            document.body.removeChild(aux);\n\n            _this.$emit('on-copy', code);\n          };\n        };\n\n        for (var i = 0, len = btns.length; i < len; i++) {\n          _loop(i, len);\n        }\n      }, 600);\n    },\n    addImageClickListener: function addImageClickListener() {\n      var _this2 = this;\n\n      // 监听查看大图\n      var _this$imgs = this.imgs,\n          imgs = _this$imgs === void 0 ? [] : _this$imgs;\n\n      if (imgs.length > 0) {\n        for (var i = 0, len = imgs.length; i < len; i++) {\n          imgs[i].onclick = null;\n        }\n      }\n\n      setTimeout(function () {\n        _this2.imgs = _this2.$refs.preview.querySelectorAll('img');\n\n        var _loop2 = function _loop2(_i, _len) {\n          _this2.imgs[_i].onclick = function () {\n            var src = _this2.imgs[_i].getAttribute('src');\n\n            _this2.previewImage(src);\n          };\n        };\n\n        for (var _i = 0, _len = _this2.imgs.length; _i < _len; _i++) {\n          _loop2(_i, _len);\n        }\n      }, 600);\n    },\n    previewImage: function previewImage(src) {\n      var _this3 = this;\n\n      // 预览图片\n      var img = new Image();\n      img.src = src;\n\n      img.onload = function () {\n        var width = img.naturalWidth;\n        var height = img.naturalHeight;\n\n        if (height / width > 1.4) {\n          _this3.previewImgMode = 'horizontal';\n        } else {\n          _this3.previewImgMode = 'vertical';\n        }\n\n        _this3.previewImgSrc = src;\n        _this3.previewImgModal = true;\n      };\n    }\n  },\n  watch: {\n    initialValue: function initialValue() {\n      this.translateMarkdown();\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div ref=\"preview\">\r\n        <div\r\n            :class=\"`markdown-preview ${'markdown-theme-' + theme}`\"\r\n            v-html=\"html\"\r\n        ></div>\r\n        <!-- 预览图片-->\r\n        <div :class=\"['preview-img', previewImgModal ? 'active' : '']\">\r\n            <span\r\n                class=\"close icon-close iconfont\"\r\n                @click=\"previewImgModal = false\"\r\n            ></span>\r\n            <img :src=\"previewImgSrc\" :class=\"[previewImgMode]\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import marked from '../../config/marked';\r\n\r\n    export default {\r\n        name: 'markdown-preview',\r\n        props: {\r\n            initialValue: {\r\n                // 初始化内容\r\n                type: String,\r\n                default: ''\r\n            },\r\n            markedOptions: {\r\n                type: Object,\r\n                default: () => ({})\r\n            },\r\n            theme: {\r\n                type: String,\r\n                default: 'light'\r\n            },\r\n            copyCode: {// 复制代码\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            copyBtnText: {// 复制代码按钮文字\r\n                type: String,\r\n                default: '复制代码'\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                html: '',\r\n                previewImgModal: false,\r\n                previewImgSrc: '',\r\n                previewImgMode: ''\r\n            };\r\n        },\r\n        mounted() {\r\n            this.translateMarkdown();\r\n        },\r\n        methods: {\r\n            translateMarkdown() {\r\n                let html = marked(this.initialValue, {\r\n                    sanitize: false,\r\n                    ...this.markedOptions\r\n                }).replace(/href=\"/gi, 'target=\"_blank\" href=\"');\r\n                if (this.copyCode) {\r\n                    html = html.replace(/<pre>/g, '<div class=\"code-block\"><span class=\"copy-code\">' + this.copyBtnText + '</span><pre>').replace(/<\\/pre>/g, '</pre></div>');\r\n                }\r\n                this.html = html;\r\n\r\n                this.addCopyListener();\r\n                this.addImageClickListener();\r\n            },\r\n            addCopyListener() {// 监听复制操作\r\n                setTimeout(() => {\r\n                    const btns = document.querySelectorAll(\r\n                        '.code-block .copy-code'\r\n                    );\r\n                    this.btns = btns;\r\n                    for (let i = 0, len = btns.length; i < len; i++) {\r\n                        btns[i].onclick = () => {\r\n                            const code = btns[i].parentNode.querySelectorAll(\r\n                                'pre'\r\n                            )[0].innerText;\r\n                            const aux = document.createElement('input');\r\n                            aux.setAttribute('value', code);\r\n                            document.body.appendChild(aux);\r\n                            aux.select();\r\n                            document.execCommand('copy');\r\n                            document.body.removeChild(aux);\r\n                            this.$emit('on-copy', code);\r\n                        };\r\n                    }\r\n                }, 600);\r\n            },\r\n            addImageClickListener() {// 监听查看大图\r\n                const {imgs = []} = this;\r\n                if (imgs.length > 0) {\r\n                    for (let i = 0, len = imgs.length; i < len; i++) {\r\n                        imgs[i].onclick = null;\r\n                    }\r\n                }\r\n                setTimeout(() => {\r\n                    this.imgs = this.$refs.preview.querySelectorAll('img');\r\n                    for (let i = 0, len = this.imgs.length; i < len; i++) {\r\n                        this.imgs[i].onclick = () => {\r\n                            const src = this.imgs[i].getAttribute('src');\r\n                            this.previewImage(src);\r\n                        };\r\n                    }\r\n                }, 600);\r\n            },\r\n            previewImage(src) {// 预览图片\r\n                const img = new Image();\r\n                img.src = src;\r\n                img.onload = () => {\r\n                    const width = img.naturalWidth;\r\n                    const height = img.naturalHeight;\r\n                    if (height / width > 1.4) {\r\n                        this.previewImgMode = 'horizontal';\r\n                    } else {\r\n                        this.previewImgMode = 'vertical';\r\n                    }\r\n                    this.previewImgSrc = src;\r\n                    this.previewImgModal = true;\r\n                };\r\n            }\r\n        },\r\n        watch: {\r\n            initialValue() {\r\n                this.translateMarkdown();\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    @import \"../../assets/font/iconfont.css\";\r\n    @import \"../../assets/css/theme\";\r\n    @import \"../../assets/css/index\";\r\n    @import \"../../assets/css/light\";\r\n    @import \"../../assets/css/dark\";\r\n    @import \"../../assets/css/one-dark\";\r\n    @import \"../../assets/css/github\";\r\n</style>\r\n"],"sourceRoot":"src/util/markdown/components/preview"}]}